<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>TestingOnARamDisk • Vitess</title>
    <meta name="description" content="Testing On A Ramdisk

The integration_test testsuite contains tests that may time-out if run against a slow disk. If your workspace lives on hard disk (as opposed to SSD), it is recommended that you run tests using a ramdisk.

Setup

First, set up a normal vitess development environment by running bootstrap.sh and sourcing dev.env (see GettingStarted). Then overwrite the testing temporary directories and make a 4GiB (smaller sizes may work, if you&#39;re constrained on RAM) ramdisk at the location of your choice (this example uses /tmp/vt):
export TEST_TMPDIR=/tmp/vt

mkdir ${TEST_TMPDIR}
sudo mount -t tmpfs -o size=4g tmpfs ${TEST_TMPDIR}

export VTDATAROOT=${TEST_TMPDIR}
export TEST_UNDECLARED_OUTPUTS_DIR=${TEST_TMPDIR}

You can now run tests (either individually or as part of make test) normally.

Teardown

When you are done testing, you can remove the ramdisk by unmounting it and then removing the directory:
sudo umount ${TEST_TMPDIR}
rmdir ${TEST_TMPDIR}
">
    <meta name="keywords" content="">
    
    
    	<!-- Twitter Cards -->
	<meta name="twitter:title" content="TestingOnARamDisk">
	<meta name="twitter:description" content="Testing On A Ramdisk

The integration_test testsuite contains tests that may time-out if run against a slow disk. If your workspace lives on hard disk (as opposed to SSD), it is recommended that you run tests using a ramdisk.

Setup

First, set up a normal vitess development environment by running bootstrap.sh and sourcing dev.env (see GettingStarted). Then overwrite the testing temporary directories and make a 4GiB (smaller sizes may work, if you&#39;re constrained on RAM) ramdisk at the location of your choice (this example uses /tmp/vt):
export TEST_TMPDIR=/tmp/vt

mkdir ${TEST_TMPDIR}
sudo mount -t tmpfs -o size=4g tmpfs ${TEST_TMPDIR}

export VTDATAROOT=${TEST_TMPDIR}
export TEST_UNDECLARED_OUTPUTS_DIR=${TEST_TMPDIR}

You can now run tests (either individually or as part of make test) normally.

Teardown

When you are done testing, you can remove the ramdisk by unmounting it and then removing the directory:
sudo umount ${TEST_TMPDIR}
rmdir ${TEST_TMPDIR}
">
	
	
	
	<meta name="twitter:card" content="summary">
	<meta name="twitter:image" content="vitess.io/images/120x120.gif">
	
	<!-- Open Graph -->
	<meta property="og:locale" content="en_US">
	<meta property="og:type" content="article">
	<meta property="og:title" content="TestingOnARamDisk">
	<meta property="og:description" content="Testing On A Ramdisk

The integration_test testsuite contains tests that may time-out if run against a slow disk. If your workspace lives on hard disk (as opposed to SSD), it is recommended that you run tests using a ramdisk.

Setup

First, set up a normal vitess development environment by running bootstrap.sh and sourcing dev.env (see GettingStarted). Then overwrite the testing temporary directories and make a 4GiB (smaller sizes may work, if you&#39;re constrained on RAM) ramdisk at the location of your choice (this example uses /tmp/vt):
export TEST_TMPDIR=/tmp/vt

mkdir ${TEST_TMPDIR}
sudo mount -t tmpfs -o size=4g tmpfs ${TEST_TMPDIR}

export VTDATAROOT=${TEST_TMPDIR}
export TEST_UNDECLARED_OUTPUTS_DIR=${TEST_TMPDIR}

You can now run tests (either individually or as part of make test) normally.

Teardown

When you are done testing, you can remove the ramdisk by unmounting it and then removing the directory:
sudo umount ${TEST_TMPDIR}
rmdir ${TEST_TMPDIR}
">
	<meta property="og:url" content="vitess.io/doc/TestingOnARamDisk/">
	<meta property="og:site_name" content="Vitess">

    <link rel="canonical" href="vitess.io/doc/TestingOnARamDisk/">

    <link href="vitess.io/sitemap.xml" type="application/xml" rel="sitemap" title="Sitemap">

    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="320">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="cleartype" content="on">

    <style>
    .sliding-menu-content {
      top: 0;
      right: 0;
      text-align: center;
      visibility: hidden;
      height: 100%;
      width: 100%;
      -webkit-transform: translateX(100%);
      -moz-transform: translateX(100%);
      -ms-transform: translateX(100%);
      -o-transform: translateX(100%);
      transform: translateX(100%);
    }
    </style>

    <link rel="stylesheet" href="vitess.io/css/main.css">
    <!-- HTML5 Shiv and Media Query Support for IE -->
    <!--[if lt IE 9]>
      <script src="vitess.io/js/vendor/html5shiv.min.js"></script>
      <script src="vitess.io/js/vendor/respond.min.js"></script>
    <![endif]-->

  </head>

  <body>
    <header id="masthead">
  <div class="inner-wrap">
    <a href="vitess.io/" class="site-title">Vitess</a>
    <nav role="navigation" class="menu top-menu">
        <ul class="menu-item">
	<li class="home"><a href="/">Vitess</a></li>
	
    
        
    
    <li><a href="vitess.io/getting-started/" >Getting Started</a></li>
  
    
        
    
    <li><a href="vitess.io/doc/" >Documentation</a></li>
  
    
        
    
    <li><a href="vitess.io/about/" >About</a></li>
  
    
        
    
    <li><a href="vitess.io/faq/" >FAQ</a></li>
  
</ul>
    </nav>
  </div>
</header>

    <nav role="navigation" class="js-menu sliding-menu-content">
	<ul class="menu-item">
		<li>
      
        
      
			<a href="vitess.io/getting-started/"><img src="vitess.io/images/400x250.gif" alt="teaser" class="teaser"></a>
			<a href="vitess.io/getting-started/" class="title">Getting Started</a>
			<p class="excerpt">Everything you need to know to get started with Vitess.</p>
		</li><li>
      
        
      
			<a href="vitess.io/doc/"><img src="vitess.io/images/400x250.gif" alt="teaser" class="teaser"></a>
			<a href="vitess.io/doc/" class="title">Documentation</a>
			<p class="excerpt">Vitess Docs.</p>
		</li><li>
      
        
      
			<a href="vitess.io/about/"><img src="vitess.io/images/400x250.gif" alt="teaser" class="teaser"></a>
			<a href="vitess.io/about/" class="title">About</a>
			<p class="excerpt">All about Vitess.</p>
		</li><li>
      
        
      
			<a href="vitess.io/faq/"><img src="vitess.io/images/400x250.gif" alt="teaser" class="teaser"></a>
			<a href="vitess.io/faq/" class="title">FAQ</a>
			<p class="excerpt">Vitess Faq.</p>
		</li>
	</ul>
</nav>
<button type="button" class="js-menu-trigger sliding-menu-button menulines-button x2" role="button" aria-label="Toggle Navigation">
	<span class="menulines"></span>
</button>

<div class="js-menu-screen menu-screen"></div>

    <div id="page-wrapper">
      <!--[if lt IE 9]><div class="upgrade notice-danger"><strong>Your browser is quite old!</strong> Why not <a href="http://whatbrowser.org/">upgrade to a newer one</a> to better enjoy this site?</div><![endif]-->

      <div id="main" role="main">
  <article class="wrap" itemscope itemtype="http://schema.org/Article">
    
    
  <nav class="breadcrumbs">
    <span itemscope itemtype="http://data-vocabulary.org/Breadcrumb">
      <a href="vitess.io" itemprop="url">
        <span itemprop="title">Home</span>
      </a> › 
    <span itemscope itemtype="http://data-vocabulary.org/Breadcrumb">
      <a href="vitess.io/doc/" itemprop="url">
        <span itemprop="title">Doc</span>
      </a>
    </span>
  </nav>


    <div class="inner-wrap">
      <nav class="toc"></nav>
      <div id="content" class="page-content" itemprop="articleBody">
	<h1 id="testing-on-a-ramdisk">Testing On A Ramdisk</h1>

<p>The <code>integration_test</code> testsuite contains tests that may time-out if run against a slow disk. If your workspace lives on hard disk (as opposed to <a href="http://en.wikipedia.org/wiki/Solid-state_drive">SSD</a>), it is recommended that you run tests using a <a href="http://en.wikipedia.org/wiki/RAM_drive">ramdisk</a>.</p>

<h1 id="setup">Setup</h1>

<p>First, set up a normal vitess development environment by running <code>bootstrap.sh</code> and sourcing <code>dev.env</code> (see <a href="vitess.io/doc/GettingStarted">GettingStarted</a>). Then overwrite the testing temporary directories and make a 4GiB (smaller sizes may work, if you&#39;re constrained on RAM) ramdisk at the location of your choice (this example uses <code>/tmp/vt</code>):</p>
<div class="highlight"><pre><code class="language-sh" data-lang="sh"><span class="nb">export </span><span class="nv">TEST_TMPDIR</span><span class="o">=</span>/tmp/vt

mkdir <span class="k">${</span><span class="nv">TEST_TMPDIR</span><span class="k">}</span>
sudo mount -t tmpfs -o <span class="nv">size</span><span class="o">=</span>4g tmpfs <span class="k">${</span><span class="nv">TEST_TMPDIR</span><span class="k">}</span>

<span class="nb">export </span><span class="nv">VTDATAROOT</span><span class="o">=</span><span class="k">${</span><span class="nv">TEST_TMPDIR</span><span class="k">}</span>
<span class="nb">export </span><span class="nv">TEST_UNDECLARED_OUTPUTS_DIR</span><span class="o">=</span><span class="k">${</span><span class="nv">TEST_TMPDIR</span><span class="k">}</span>
</code></pre></div>
<p>You can now run tests (either individually or as part of <code>make test</code>) normally.</p>

<h1 id="teardown">Teardown</h1>

<p>When you are done testing, you can remove the ramdisk by unmounting it and then removing the directory:</p>
<div class="highlight"><pre><code class="language-sh" data-lang="sh">sudo umount <span class="k">${</span><span class="nv">TEST_TMPDIR</span><span class="k">}</span>
rmdir <span class="k">${</span><span class="nv">TEST_TMPDIR</span><span class="k">}</span>
</code></pre></div>
	<hr />
	<footer class="page-footer">
	  


<div class="author-image">
	<img src="vitess.io/images/" alt="Vitess Team">
</div>
<div class="author-content">
	<h3 class="author-name" >Written by <a href="https://github.com/youtube/vitess" itemprop="author">Vitess Team</a></h3>
	<p class="author-bio"></p>
</div>

	  <div class="inline-btn">
	<a class="btn-social twitter" href="https://twitter.com/intent/tweet?text=TestingOnARamDisk&amp;url=vitess.io/doc/TestingOnARamDisk/&amp;via=" target="_blank"><i class="fa fa-twitter" aria-hidden="true"></i> Share on Twitter</a>
	<a class="btn-social facebook" href="https://www.facebook.com/sharer/sharer.php?u=vitess.io/doc/TestingOnARamDisk/" target="_blank"><i class="fa fa-facebook" aria-hidden="true"></i> Share on Facebook</a>
	<a class="btn-social google-plus"  href="https://plus.google.com/share?url=vitess.io/doc/TestingOnARamDisk/" target="_blank"><i class="fa fa-google-plus" aria-hidden="true"></i> Share on Google+</a>
</div>

	  <div class="page-meta">
	<p>Updated <time datetime="2015-01-01T00:00:00Z" itemprop="datePublished">January 01, 2015</time></p>
</div>

	</footer>
	<aside>
	  
	</aside>
      </div>
    </div>
  </article>
</div>


      <footer role="contentinfo" id="site-footer">
  <nav role="navigation" class="menu bottom-menu">
    <ul class="menu-item">
      
      
        
      
      <li><a href="vitess.io/" >Home</a></li>
      
      
        
      
      <li><a href="vitess.io/getting-started/" >Getting Started</a></li>
      
      
        
      
      <li><a href="vitess.io/about/" >About</a></li>
      
      
        
      
      <li><a href="vitess.io/faq/" >FAQ</a></li>
      
      
        
      
      <li><a href="vitess.io/terms/" >Terms</a></li>
      
    </ul>
  </nav>
  <p class="copyright">&#169; 2015 <a href="vitess.io">Vitess</a> powered by <a href="http://www.google.com">Google Inc</a>.</p>
</footer>

    </div>

    <script src="vitess.io/js/vendor/jquery-1.9.1.min.js"></script>
    <script src="vitess.io/js/main.js"></script>
    
    
    <script type="text/javascript">
      $('.toc').toc({
        'selectors': 'h2', //elements to use as headings
        'container': '.page-content', //element to find all selectors in
        'smoothScrolling': true, //enable or disable smooth scrolling on click
        'prefix': 'toc', //prefix for anchor tags and class names
        'onHighlight': function(el) {}, //called when a new section is highlighted 
        'highlightOnScroll': true, //add class to heading that is currently in focus
        'highlightOffset': 100, //offset to trigger the next headline
        'anchorName': function(i, heading, prefix) { //custom function for anchor name
          return prefix+i;
        },
        'headerText': function(i, heading, $heading) { //custom function building the header-item text
          return $heading.text();
        },
        'itemClass': function(i, heading, $heading, prefix) { //custom function for item class
          return $heading[0].tagName.toLowerCase();
        }
      });
    </script>
    

  </body>

</html>
